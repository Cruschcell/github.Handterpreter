import { StyleSheet, Text, View, TouchableOpacity, Dimensions, ScrollView, TextInput, Alert} from 'react-native'
import {SafeAreaView} from 'react-native-safe-area-context';
import React, {useState, useEffect} from 'react'
import Svg, {Path} from 'react-native-svg';
import AsyncStorage from '@react-native-async-storage/async-storage';

const {width} = Dimensions.get('window');

const BackArrowIcon = () => (
    <Svg width="24" height="24" fill="none" viewBox="0 0 24 24">
      <Path fill="#565656" d="m5.543 9.208 3.47 3.471a.65.65 0 0 1 .205.496.71.71 0 0 1-.222.496.75.75 0 0 1-.496.204.647.647 0 0 1-.496-.204L3.33 8.996a.625.625 0 0 1-.15-.23.827.827 0 0 1 .001-.531.606.606 0 0 1 .15-.23l4.675-4.676a.661.661 0 0 1 .487-.195.72.72 0 0 1 .505.195.69.69 0 0 1 .212.505c0 .195-.07.363-.212.505L5.543 7.792h7.915c.201 0 .37.068.505.204a.683.683 0 0 1 .204.504.69.69 0 0 1-.204.505.677.677 0 0 1-.505.203H5.543Z"/>
    </Svg>
);

const EyeIcon = () =>(
  <Svg width="32" height="32" fill="none">
    <Path fill="#565656"
      d="M15 11.25a3.75 3.75 0 1 0 0 7.5 3.75 3.75 0 0 0 0-7.5Zm0 10a6.25 6.25 0 1 1 0-12.5 6.25 6.25 0 0 1 0 12.5Zm0-15.625C8.75 5.625 3.412 9.512 1.25 15c2.163 5.488 7.5 9.375 13.75 9.375S26.587 20.488 28.75 15C26.587 9.512 21.25 5.625 15 5.625Z"/>
  </Svg>
);

const EyeClosedIcon = () =>(
  <Svg width="30" height="27" fill="none">
    <Path
      fill="#565656"
      d="M16.237 12.922A3.25 3.25 0 0 0 13 9.75l3.237 3.172Z"
    />
    <Path
      fill="#565656"
      d="M10.66 7.67A5.72 5.72 0 0 1 13 7.15 5.85 5.85 0 0 1 18.85 13a5.59 5.59 0 0 1-.377 2.015l3.627 3.367A18.2 18.2 0 0 0 26 13s-3.9-9.1-13-9.1a12.48 12.48 0 0 0-5.2 1.105l2.86 2.665ZM2.6 2.6 1.3 3.9l3.315 3.12A18.07 18.07 0 0 0 0 13s3.9 9.1 13 9.1a12.61 12.61 0 0 0 6.032-1.508L23.4 24.7l1.3-1.3L2.6 2.6ZM13 18.85A5.85 5.85 0 0 1 7.15 13a5.785 5.785 0 0 1 .78-2.86l1.989 1.872A3.25 3.25 0 0 0 9.75 13a3.237 3.237 0 0 0 4.433 3.016l2.002 1.885c-.947.62-2.054.95-3.185.949Z"
    />
  </Svg>
);

const Illustration = () =>(
  <Svg width={300} height={250} viewBox="-5 0 300 224" fill="none">
     <Path stroke="#000" strokeWidth={0.5} d="M0 182.75h306" />
     <Path
      fill="#000"
      d="M210.975 9.09c-4.483-.16-8.36 3.76-7.712 7.586.306 1.333 1.064 2.548 2.171 3.477 1.106.93 2.505 1.527 4.005 1.711 4.18.49 8.736-2.65 8.579-6.58-.13-1.628-.919-3.157-2.216-4.298-1.298-1.14-3.015-1.815-4.827-1.896Zm2.801 9.973-3.135-1.88-4.086 2.294 1.39-3.469-2.279-1.325 3.052-.451 1.923-2.773 1.16 2.19 3.553-.141-2.623 2.284 1.045 3.271Zm-46.555 40.035c.7-.16 1.557-.724 1.463-1.438-.094-.715-.951-1.081-1.641-1.11-1.107 0-2.215.94-2.027 1.683.188.743 1.296 1.062 2.205.865ZM136.414 162.15a15.072 15.072 0 0 0 2.728-2.632c1.348-1.701 3.323-4.174 2.581-6.862-.47-1.73-2.205-3.986-4.692-4.061-2.487-.075-4.494 2.294-5.089 4.023-.826 2.36.407 4.503 1.233 5.922a11.988 11.988 0 0 0 3.239 3.61Zm-1.724-8.648c0-.372.123-.735.352-1.044.23-.31.556-.551.938-.693a2.318 2.318 0 0 1 1.208-.107c.405.073.778.252 1.07.515.292.263.491.598.572.962.081.365.039.743-.119 1.086a1.931 1.931 0 0 1-.77.844 2.257 2.257 0 0 1-1.161.317 2.213 2.213 0 0 1-1.478-.551 1.787 1.787 0 0 1-.612-1.329Zm73.61 8.385c.125-3.582-2.09-5.997-3.679-5.997-1.588 0-3.803 2.415-3.688 5.997h7.367Zm.961-1.73 2.54.047a3.155 3.155 0 0 0-.356-2.444c-.878-1.382-2.288-2.011-3.239-.686a5.129 5.129 0 0 1 1.055 3.083Zm-11.871.047 2.539-.047a5.193 5.193 0 0 1 1.045-3.083c-.961-1.325-2.372-.686-3.239.686a3.143 3.143 0 0 0-.345 2.444Zm7.231-5.048c.49.04.982-.056 1.41-.275.428-.219.771-.55.983-.949.213-.399.285-.847.207-1.284a2.107 2.107 0 0 0-.645-1.161 2.51 2.51 0 0 0-1.265-.623 2.676 2.676 0 0 0-1.435.138 2.36 2.36 0 0 0-1.091.848 2.005 2.005 0 0 0-.358 1.257c.017.526.251 1.027.657 1.406s.954.609 1.537.643Zm-5.454.602a1.79 1.79 0 0 0 1.118-.505c.289-.29.446-.667.439-1.055a1.352 1.352 0 0 0-.341-.749 1.589 1.589 0 0 0-.739-.459 1.735 1.735 0 0 0-.899-.022 1.617 1.617 0 0 0-.766.423 1.363 1.363 0 0 0-.385.73c-.047.272-.005.55.121.801s.33.464.588.612c.257.149.558.226.864.224Zm10.909 0c.431-.036.83-.216 1.119-.505.289-.29.445-.667.438-1.055a1.344 1.344 0 0 0-.34-.749 1.594 1.594 0 0 0-.739-.459 1.735 1.735 0 0 0-.899-.022 1.608 1.608 0 0 0-.766.423 1.363 1.363 0 0 0-.385.73c-.047.272-.005.55.121.801s.33.464.588.612c.257.149.557.226.863.224Zm-68.688-93.953a3.71 3.71 0 0 1-2.09-.47 6.283 6.283 0 0 1 1.349-2.256.288.288 0 0 0-.047-.398.375.375 0 0 0-.445-.025c-.365.338-1.954 2.406-1.651 3.074.303.667 2.77 1.034 3.323.554a.303.303 0 0 0 .125-.21.29.29 0 0 0-.078-.227.374.374 0 0 0-.486-.042Zm6.145 4.756c2.291-.067 4.495-.81 6.27-2.115a4.33 4.33 0 0 1-.693 1.823 4.865 4.865 0 0 1-1.46 1.411.276.276 0 0 0-.138.168.247.247 0 0 0 .034.208.303.303 0 0 0 .187.125.335.335 0 0 0 .231-.031 5.179 5.179 0 0 0 2.169-1.978c.496-.834.711-1.78.621-2.722a.396.396 0 0 0-.091-.226.463.463 0 0 0-.213-.146.52.52 0 0 0-.267-.017.491.491 0 0 0-.234.116c-1.677 1.623-3.979 2.608-6.437 2.755a.417.417 0 0 0-.271.114.338.338 0 0 0-.105.252.372.372 0 0 0 .149.192.44.44 0 0 0 .248.071Zm.491-20.83a.464.464 0 0 0-.31.116.378.378 0 0 0-.129.279c0 .105.047.205.129.279a.464.464 0 0 0 .31.116 6.142 6.142 0 0 1 2.411.605 5.52 5.52 0 0 1 1.884 1.481.345.345 0 0 0 .202.104.368.368 0 0 0 .229-.04.312.312 0 0 0 .144-.165.271.271 0 0 0-.011-.209 5.376 5.376 0 0 0-2.048-1.867 6.125 6.125 0 0 0-2.811-.699Zm-12.488.64a3.823 3.823 0 0 1-2.497.751.403.403 0 0 0-.258.077.333.333 0 0 0-.133.214.312.312 0 0 0 .062.238.38.38 0 0 0 .224.139 4.15 4.15 0 0 0 1.701-.035 3.908 3.908 0 0 0 1.508-.708c.418-.357-.136-.987-.607-.677Zm-.961 9.615c0-.423-.251-2.152-.24-2.556a.315.315 0 0 0-.107-.233.39.39 0 0 0-.259-.096.39.39 0 0 0-.258.086.317.317 0 0 0-.118.224 21.007 21.007 0 0 0 0 2.679.434.434 0 0 0 .184.297.525.525 0 0 0 .364.093.535.535 0 0 0 .184-.053.479.479 0 0 0 .147-.113.406.406 0 0 0 .103-.328Zm14.745-.225c0-.31-.209-1.551-.199-1.88a.312.312 0 0 0-.107-.233.385.385 0 0 0-.258-.096.39.39 0 0 0-.259.096.312.312 0 0 0-.107.233c0 .338-.105 1.645-.063 1.983a.426.426 0 0 0 .173.329.55.55 0 0 0 .582.048.49.49 0 0 0 .153-.125.432.432 0 0 0 .084-.17.402.402 0 0 0 .001-.185Z"
     />
     <Path
      fill="#000"
      d="M100.518 96.82a.138.138 0 0 0 0 .094c4.568 9.256 12.011 17.127 21.434 22.667 9.424 5.54 20.426 8.512 31.684 8.56 32.645 0 59.397-24.713 58.029-54.962-.493-10.853-4.857-21.275-12.446-29.723-5.912-6.535-13.485-11.694-22.081-15.04.11-.339.194-.684.251-1.034.585-3.43-1.045-5.724-3.94-8.046a48.017 48.017 0 0 0-4.577-3.14 13.935 13.935 0 0 0-5.351-2.143 7.421 7.421 0 0 0-3.114.1 6.941 6.941 0 0 0-2.727 1.357c-.293.273-.544.705-.857.874-.457.125-.94.154-1.411.085a25.71 25.71 0 0 0-9.294 1.727c-2.934 1.14-5.579 2.807-7.771 4.9a8.704 8.704 0 0 0-3.612 1.407 7.604 7.604 0 0 0-2.47 2.757c-31.245 11.665-44.537 42.3-31.747 69.56Zm35.29 7.877a30.35 30.35 0 0 1-1.568-11.158c.157-3.14.408-8.384 4.18-10.584a16.306 16.306 0 0 1 3.815-1.739c-1.202 5.988 1.128 12.013 3.95 17.484-1.787.573-8.736 5.067-10.377 6.016v-.019Zm8.36-23.5c-.094-.94-.575-3.76-.648-4.202a1.068 1.068 0 0 0-.203-.55 1.239 1.239 0 0 0-.476-.39c-.345-.16-1.881-.63-2.289-.817-4.817-2.125-8.412-7.182-7.952-14.561 1.271.166 2.566.112 3.814-.16 1.641-.442 2.665-1.833 3.031-4.126.236-.195.516-.342.82-.43.305-.09.627-.12.946-.087a4.72 4.72 0 0 1 1.839.526c.119.746.43 1.457.909 2.076a5.226 5.226 0 0 0 1.85 1.487c1.654.719 3.553.839 5.303.335s3.218-1.593 4.102-3.043a6.813 6.813 0 0 0 .825-2.566c1.779.097 3.563-.04 5.298-.404 0 .48 0 1.344.345 1.513 1.15.517 3.135-3.637 5.925-3.637.875.05 1.699.384 2.32.94.481.32.874.736 1.146 1.215.272.48.416 1.01.422 1.548a3.37 3.37 0 0 1-.499 1.347 3.76 3.76 0 0 1-1.037 1.069c-1.248 1.056-2.885 1.662-4.598 1.701a.237.237 0 0 0-.1.034.197.197 0 0 0-.095.165c.001.033.01.064.027.093a24.123 24.123 0 0 1 3.553 8.272c-.564 5.536-.804 7.896-.919 9.043-.962 10.34-4.922 18.931-11.297 27.589a29.193 29.193 0 0 0-3.574 5.828c-3.521-9.955-12.237-19.28-10.032-29.855a3.93 3.93 0 0 1 .565-.16c0 .145.031.267.094.367a.24.24 0 0 0 .044.097.297.297 0 0 0 .189.114.336.336 0 0 0 .224-.04.285.285 0 0 0 .083-.073.246.246 0 0 0 .045-.201v-.057Zm6.981-39.31a6.814 6.814 0 0 0-1.819-.94c4.18-.348 7.409-1.42 10.262-4.437.314.15 2.09.94 2.362 1.1 3.03 4.239 1.369 5.968.261 11.185-.334 1.57-.669 3.206-.857 4.644a23.326 23.326 0 0 1-5.298.583c.084-.743.125-1.542.24-2.313.215-.077.395-.217.512-.397a.861.861 0 0 0 .134-.596.904.904 0 0 0-.299-.545 1.094 1.094 0 0 0-.608-.266l-12.54-.273c-.189.01-.372.067-.529.164a.978.978 0 0 0-.359.386.86.86 0 0 0 .125.963 25.866 25.866 0 0 0 .157 4.39 4.355 4.355 0 0 0-1.689-.379 4.378 4.378 0 0 0-1.707.304 17.75 17.75 0 0 0-.167-3.901c.142-.118.248-.268.308-.434a.92.92 0 0 0 .031-.515.982.982 0 0 0-.253-.462 1.138 1.138 0 0 0-.473-.29c-.105 0 .063 0-6.636-.15.084-1.88.115-7.098 1.045-9.645 5.33 3.581 11.819 4.7 17.765 2.124a.167.167 0 0 0 .032-.244v-.057Zm4.493 9.898c-.272 1.457-.157 2.989-.752 4.352-.62 1.393-1.813 2.517-3.332 3.139a7.148 7.148 0 0 1-4.819.198 4.308 4.308 0 0 1-1.963-1.23 3.654 3.654 0 0 1-.922-1.985 24.68 24.68 0 0 1-.323-4.7c1.692.141 10.523.254 12.111.282v-.056Zm-17.023 0c.282 2.368.428 6.58-1.912 7.745a5.965 5.965 0 0 1-2.205.404 8.267 8.267 0 0 1-1.986-.084 3.919 3.919 0 0 1-1.826-.77 3.341 3.341 0 0 1-1.11-1.514 20.707 20.707 0 0 1-.606-6.007l9.645.226Zm14.505 70.208c-2.477-3.553-11.119-15.585-13.397-18.593a31.793 31.793 0 0 1 6.688-4.07c.7 1.203 5.225 9.56 6.155 12.906.024.074.074.14.143.186a.425.425 0 0 0 .477 0 .358.358 0 0 0 .143-.186c1.463-5.095 5.068-7.398 9.29-15.313a26.917 26.917 0 0 1 6.416 4.484c-1.954 3.093-12.404 16.911-15.915 20.633v-.047Zm19.186-19.195c-6.061-5.085-8.538-6.25-9.301-6.514 2.939-5.53 4.815-11.466 5.549-17.559 3.031 2.115 6.166 4.192 8.966 6.495-.606 2.567-3.929 14.025-5.214 17.578Zm4.65-73.799c26.512 10.81 40.755 36.519 30.692 63.826-5.152-2.002-24.976-7.445-29.511-8.075-1.275-1.09-7.315-5.31-9.478-6.786 0-.452-.084.864.752-8.263 0-.103 2.331-10.528 3.313-12.803a21.839 21.839 0 0 1 1.912-3.468c1.222-1.987 1.593-4.308 1.045-6.524a5.365 5.365 0 0 0-1.045-1.946c1.061-.935 1.788-2.132 2.09-3.44.282-1.984-.815-3.91-1.881-5.574a7.001 7.001 0 0 0 1.296-3.704 2.982 2.982 0 0 0-.46-1.42A5.124 5.124 0 0 0 176.918 29h.042Zm-43.138-2.435c3.135-3.995 9.405-2.989 14.704-2.03a91.152 91.152 0 0 1 18.559 5.48.31.31 0 0 0 .215.017.275.275 0 0 0 .166-.125.228.228 0 0 0 .019-.194.26.26 0 0 0-.139-.149 84.174 84.174 0 0 0-18.037-5.64c-2.978-.573-6.541-1.24-9.635-.94 3.563-3.014 8.096-4.936 12.948-5.49 3.313-.376 4.264.235 5.162-.77a4.996 4.996 0 0 1 1.693-1.345c1.724-.808 4.243-.94 7.253.602a38.987 38.987 0 0 1 4.65 2.82 17.485 17.485 0 0 1 3.877 3.422c1.028 1.221 1.522 2.74 1.39 4.267-.05 1.342-.577 2.634-1.505 3.685a10.747 10.747 0 0 0-1.338-1.175c-2.487-1.88-10.847-7.182-12.54-8.112a.344.344 0 0 0-.237-.036.317.317 0 0 0-.197.125.263.263 0 0 0-.04.214.287.287 0 0 0 .14.176c2.372 1.335 9.687 6.26 11.495 7.642 1.17.875 2.299 1.664 2.633 2.595.502 1.438-.418 2.82-1.045 4.155a.302.302 0 0 0-.025.2.321.321 0 0 0 .109.176c.94 1.522 2.027 3.656 1.724 5.386-.292 1.071-.911 2.048-1.787 2.82-4.284-4.587-14.494-9.73-21.287-12.032-7.962-2.736-18.015-2.745-20.753-1.72a9.58 9.58 0 0 1 1.828-4.024Zm-2.09 1.796c-.33.879-.561 1.786-.689 2.707-.805.3-1.526 1.523-2.09 3.487-.679 2.614-1.275 4.87.177 7.079a7.149 7.149 0 0 0 2.665 2.321c-.125.94-.449 4.371-.418 5.8l-2.748-.056h-.073a1.083 1.083 0 0 0-.538.259.918.918 0 0 0-.286.485.859.859 0 0 0 .065.546.973.973 0 0 0 .393.42 34.375 34.375 0 0 0 .397 6.045c.159.72.535 1.388 1.089 1.928.553.541 1.261.934 2.046 1.136-.291 3.389.473 6.784 2.205 9.804 1.621 2.823 4.346 5.006 7.649 6.13 1.045.31 1.045.272 1.15.78 0 0 .439 2.368.585 3.083-3.085.459-5.891 1.884-7.921 4.023-12.147 2.078-23.759 6.167-34.245 12.06-2.986-6.273-4.562-13.015-4.637-19.839-.076-6.823 1.352-13.593 4.199-19.918 2.847-6.325 7.058-12.08 12.391-16.934 5.332-4.854 11.679-8.71 18.676-11.346h-.042ZM99.16 12.944c.616-.057.543-.893 0-.827-2.445.065-11.82.347-14.348.329a.311.311 0 0 0-.177.094.256.256 0 0 0-.07.174c0 .063.025.125.07.173a.312.312 0 0 0 .177.094c2.34.104 11.965.179 14.348-.037Zm-1.045 2.218c-.951 0-10.973.705-12.98.733a.321.321 0 0 0-.213.08.26.26 0 0 0-.09.193.26.26 0 0 0 .09.193c.056.05.133.08.214.08 1.63 0 11.84-.245 13.083-.461a.466.466 0 0 0 .277-.163.383.383 0 0 0-.07-.552.492.492 0 0 0-.311-.103Zm1.661 3.713s-12.822.433-14.044.442a.355.355 0 0 0-.205.106.292.292 0 0 0-.08.2c0 .072.028.143.08.199a.355.355 0 0 0 .205.106c4.702 0 9.405.16 14.076-.179a.507.507 0 0 0 .296-.156.415.415 0 0 0 .109-.293.421.421 0 0 0-.13-.286.512.512 0 0 0-.307-.139Zm70.444 140.192-.773-.357a.195.195 0 0 0-.178 0 8.368 8.368 0 0 0-2.383 2.82.139.139 0 0 0-.003.106.16.16 0 0 0 .076.082 5.892 5.892 0 0 0 2.414.545c2.78 0 4.536-2.143 6.103-4.136 1.359-1.749 3.062-3.92 2.216-6.026a4.063 4.063 0 0 0-1.453-1.776.152.152 0 0 0-.099-.035.154.154 0 0 0-.1.035 7.446 7.446 0 0 0-2.487 2.82.122.122 0 0 0 0 .15l.847.724c-.977 1.931-2.403 3.653-4.18 5.048Zm-2.602-1.241a16.798 16.798 0 0 0-1.913 2.331c-.271.536.523.799.732.47a22.597 22.597 0 0 1 1.923-2.322c.219-.206-.23-.789-.742-.479Zm5.267-5.367c.065.001.13-.01.19-.035a.42.42 0 0 0 .154-.106 24.04 24.04 0 0 1 1.923-2.322c.23-.216-.219-.79-.752-.47a16.568 16.568 0 0 0-1.892 2.322.37.37 0 0 0-.007.402.423.423 0 0 0 .161.15.487.487 0 0 0 .223.059Zm31.172-12.032a.485.485 0 0 0 .192-.039.419.419 0 0 0 .153-.112.354.354 0 0 0 .073-.338l.24-6.58c0-.508.053-1.138-.595-1.467-.648-.329-102.912-.545-102.797-.545a.224.224 0 0 0-.178.094 49.13 49.13 0 0 0-.386 7.52c.122.228.319.416.563.541.245.124.526.178.806.155 1.431 0 101.929.771 101.929.771Zm-.209-7.05c0 .216 0 .084-.188 6.251-4.891-.132-101.114-.809-101.835-.846-.324-.104-.324-.386-.303-.828l.198-5.818c5.131.131 101.47.357 101.867.385.397.028.292.414.261.856Zm-93.465 34.469a.484.484 0 0 0 .325-.121.394.394 0 0 0 .135-.292.396.396 0 0 0-.135-.293.489.489 0 0 0-.325-.121c-2.341.122-11.819.357-14.348.329a.312.312 0 0 0-.177.094.258.258 0 0 0-.07.174c0 .064.025.125.07.174a.312.312 0 0 0 .177.094c2.33.103 11.934.169 14.348-.038Zm-1.097 2.219c-.941 0-10.962.705-12.979.733a.322.322 0 0 0-.214.08.258.258 0 0 0-.09.193c0 .072.033.141.09.192.056.051.134.08.214.08 1.891 0 11.882-.254 13.083-.46a.467.467 0 0 0 .277-.164.384.384 0 0 0-.071-.552.49.49 0 0 0-.31-.102Zm1.693 3.722s-12.802.423-14.055.433a.35.35 0 0 0-.205.106.29.29 0 0 0-.08.199c0 .073.028.144.08.2a.362.362 0 0 0 .205.106c4.681 0 9.405.159 14.065-.179a.523.523 0 0 0 .339-.13.435.435 0 0 0 .102-.141.4.4 0 0 0-.004-.331.477.477 0 0 0-.263-.232.543.543 0 0 0-.184-.031Zm32.687-5.941a.484.484 0 0 0 .325-.121.39.39 0 0 0 .135-.292.393.393 0 0 0-.135-.293.489.489 0 0 0-.325-.121c-2.361.113-11.829.357-14.347.329a.312.312 0 0 0-.178.094.258.258 0 0 0-.07.174c0 .064.025.125.07.174a.312.312 0 0 0 .178.094c2.34.103 11.923.169 14.347-.038Zm-1.097 2.219c-.94 0-10.962.705-12.979.733a.322.322 0 0 0-.214.08.258.258 0 0 0-.089.193c0 .072.032.141.089.192.057.051.134.08.214.08 1.881 0 11.871-.254 13.073-.46a.464.464 0 0 0 .275-.162.383.383 0 0 0-.063-.549.495.495 0 0 0-.306-.107Zm1.703 3.722s-12.811.423-14.055.433a.349.349 0 0 0-.204.106.292.292 0 0 0-.081.199c0 .073.029.144.081.2a.36.36 0 0 0 .204.106c4.682 0 9.405.159 14.066-.179a.506.506 0 0 0 .338-.13.408.408 0 0 0 .137-.307.41.41 0 0 0-.144-.304.509.509 0 0 0-.342-.124Zm33.702-5.941a.484.484 0 0 0 .325-.121.394.394 0 0 0 .135-.292.396.396 0 0 0-.135-.293.489.489 0 0 0-.325-.121c-2.362.122-11.819.357-14.359.329a.313.313 0 0 0-.177.094.258.258 0 0 0-.07.174c0 .064.025.125.07.174a.313.313 0 0 0 .177.094c2.352.103 11.934.169 14.359-.038Zm-1.098 2.219c-.93 0-10.962.705-12.968.733a.322.322 0 0 0-.214.08.258.258 0 0 0-.089.193c0 .072.032.141.089.192.057.051.134.08.214.08 1.881 0 11.871-.254 13.083-.46a.473.473 0 0 0 .28-.165.389.389 0 0 0 .081-.292.402.402 0 0 0-.159-.264.492.492 0 0 0-.317-.097Zm1.704 3.722s-12.812.423-14.055.433a.351.351 0 0 0-.205.106.291.291 0 0 0 0 .399.363.363 0 0 0 .205.106c4.681 0 9.405.159 14.065-.179a.51.51 0 0 0 .339-.13.412.412 0 0 0 .137-.307.414.414 0 0 0-.145-.304.508.508 0 0 0-.341-.124Zm32.761-5.941a.486.486 0 0 0 .325-.121.393.393 0 0 0 .134-.292.395.395 0 0 0-.134-.293.49.49 0 0 0-.325-.121c-2.341.113-11.819.357-14.359.329a.313.313 0 0 0-.177.094.258.258 0 0 0-.07.174c0 .064.025.125.07.174a.313.313 0 0 0 .177.094c2.352.103 11.903.169 14.359-.038Zm-1.098 2.219c-.93 0-10.962.705-12.968.733a.318.318 0 0 0-.214.08.258.258 0 0 0-.089.193c0 .072.032.141.089.192.056.051.133.08.214.08 1.881 0 11.871-.254 13.083-.46a.473.473 0 0 0 .28-.165.389.389 0 0 0 .081-.292.407.407 0 0 0-.16-.264.487.487 0 0 0-.316-.097Zm1.704 3.722s-12.812.423-14.056.433a.352.352 0 0 0-.204.106.292.292 0 0 0-.081.199c0 .073.029.144.081.2a.364.364 0 0 0 .204.106c4.672 0 9.405.159 14.066-.179a.51.51 0 0 0 .339-.13.412.412 0 0 0 .137-.307.414.414 0 0 0-.145-.304.508.508 0 0 0-.341-.124Zm-99.401-11.12-2.424-.047c0-1.109-.084-3.967-.126-4.85.315-.237.519-.573.569-.939a1.35 1.35 0 0 0-.297-1.035c-.094-.123 0-.094-2.957 0v-1.88c.184-.235.307-.504.361-.786a1.75 1.75 0 0 0-.048-.85.187.187 0 0 0-.077-.103.224.224 0 0 0-.132-.038l-3.72.103c-.063-.714-.334-3.28-.439-3.449a.604.604 0 0 0-.334-.264c1.296-1.682-.742-2.274-.345-3.139.167-.367-.439-.621-.679-.282a7.68 7.68 0 0 0-1.338 2.34c.009.25.086.494.225.71.138.216.334.399.569.531a.747.747 0 0 0-.364.277.625.625 0 0 0-.106.419v2.923l-2.978.085a.213.213 0 0 0-.119.037.181.181 0 0 0-.07.094 1.701 1.701 0 0 0-.08.939 1.8 1.8 0 0 0 .436.857c0 .536.073 1.269.136 1.795-3.01.113-2.895.075-2.989.169-.752.809-1.233 2.209-.345 2.82v3.413H93.12a.341.341 0 0 0-.23.085.278.278 0 0 0-.094.206c0 .077.034.151.095.206.06.055.143.085.229.085.115 0 19.29.207 19.468.188a.36.36 0 0 0 .238-.104.288.288 0 0 0-.03-.438.367.367 0 0 0-.25-.078Zm-9.603-10.387h-1.307v-2.97a3.792 3.792 0 0 1 1.045-.132c.021.395.209 2.491.262 3.102Zm-1.61-4.888c.187-.376.408-.737.659-1.081.345.602.846.94.554 1.532a3.206 3.206 0 0 1-.45.574c-.46-.292-.846-.63-.763-1.044v.019Zm-.229 6.627c.14.267.362.492.64.65.277.158.599.242.927.242.328 0 .65-.084.927-.242.278-.158.5-.383.641-.65a2.3 2.3 0 0 0 1.011.497c.38.083.777.073 1.152-.027v1.382l-7.462.263c0-.461-.052-.94-.094-1.372.418.07.849.036 1.247-.098a2.336 2.336 0 0 0 1.011-.664v.019Zm-5.445 8.46v-3.168c.468.032.94-.028 1.38-.176.44-.148.839-.379 1.17-.679.383.309.88.48 1.395.48s1.012-.171 1.395-.48c1.212 1.194 3.031.639 4.034-.686.198.252.457.462.758.612a2.532 2.532 0 0 0 1.983.105c.318-.118.603-.299.833-.529.221.053.451.068.679.047 0 .996 0 3.515.073 4.568-3.208-.019-11.6-.075-13.7-.075v-.019Z"
     />
     <Path
      fill="#000"
      d="M237.037 56.626c-1.651-1.053-.481-.94-2.884-8.056-.815-2.416-1.724-5.32-4.18-6.251 0-7.013 0-36.228.052-37.224a.38.38 0 0 0 .008-.42.431.431 0 0 0-.171-.155.499.499 0 0 0-.234-.055c-19.75 0-142.527.498-153.416.611a.456.456 0 0 0-.189.044.407.407 0 0 0-.145.117.339.339 0 0 0-.052.338c-.262 12.36-.638 79.852-.732 105.589-5.545 4.382-9.9 9.848-12.728 15.98-5.1 11.215-5.403 19.74-.889 25.221 2.989 3.666 8.956 7.783 13.69 5.893-.147 17.917-.188 23.153-.073 24.666.052.705.146.602.26.602.116 0 147.419-.245 153.95-.311.082 0 .162-.02.232-.058a.426.426 0 0 0 .165-.158c.053-.094.282-42.008.46-53.129a9.035 9.035 0 0 0 3.652-.863 8.1 8.1 0 0 0 2.848-2.229 39.878 39.878 0 0 0 6.27-9.457c2.362-5.593 4.065-9.625 5.058-15.876 2.194-13.771-1.097-28.811-7.712-41.285-1.181-2.247-1.014-2.115-3.24-3.534ZM71.99 151.96c-1.965-.817-3.752-4.502-3.03-7.679.568-2.088 1.855-3.96 3.678-5.349a17.129 17.129 0 0 1 2.727-1.983v3.243a9.88 9.88 0 0 0-2.09 1.72.291.291 0 0 0-.05.224c.015.078.06.148.13.197a.383.383 0 0 0 .474-.026 13.644 13.644 0 0 1 3.5-2.247c.91-.367 1.098-.197.879.564-.19.916-.69 1.757-1.432 2.406-.741.537-1.56.979-2.435 1.316a7.05 7.05 0 0 0-1.337.687.27.27 0 0 0-.03.381.333.333 0 0 0 .192.11.36.36 0 0 0 .224-.031c.836-.498 3.46-1.231 4.901-2.143 1.045-.649 1.14-.16.784.808-.731 1.946-3.27 2.952-4.953 4.174a.295.295 0 0 0-.04.407.358.358 0 0 0 .196.126c.08.02.165.014.24-.016.471-.235.941-.526 1.61-.94.669-.414 2.56-1.269 3.25-.94a.436.436 0 0 1 .19.149c.047.065.071.14.071.218.105.676-.522 1.334-1.16 2.068-2.926 3.365-5.34 3.055-6.49 2.556Zm156.907 30.4c-9.092.047-145.914.357-153.03.432.084-2.679 0-19.617.052-30.315a25.95 25.95 0 0 0 3.908-3.271c.293-.366 1.202-1.635.492-2.632a1.415 1.415 0 0 0-.65-.477 1.58 1.58 0 0 0-.834-.068c.72-.674 1.176-1.543 1.296-2.472 0-.292.094-.94-.523-1.213a1.646 1.646 0 0 0-.67-.052c-.225.03-.439.105-.626.221.094-.131.167-.263.251-.404.376-.667.899-2.199.48-2.763-.574-.762-2.037-.132-2.915.338.063-87.796.564-119.22.512-133.875 10.105 0 146.206-.498 152.57-.536-.083 5.217-.219 41.116-.219 41.116a14.309 14.309 0 0 0-4.891 1.654c-.408.178-.75.459-.982.809a.933.933 0 0 0-.144.4.892.892 0 0 0 .053.418c.05.134.132.258.24.361.107.104.238.186.384.24a2.925 2.925 0 0 0-1.045.94c-.105.365-.056.752.137 1.087.193.335.516.594.908.727-1.108.893-.889 2.463 1.348 2.755 1.361.172 2.746.117 4.086-.16.616 8.3-.293 121.429-.188 126.74Zm1.254-124.729a72.946 72.946 0 0 0-.23-2.18c.67-.183 1.32-.42 1.943-.705.439-.198.084-.79-.355-.593a12.45 12.45 0 0 1-5.319.94c-.679 0-1.818 0-2.09-.592-.272-.592.387-1.034.836-1.147a9.875 9.875 0 0 0 5.727-.94.328.328 0 0 0 .172-.189.29.29 0 0 0-.026-.243.349.349 0 0 0-.21-.155.392.392 0 0 0-.271.023 9.778 9.778 0 0 1-5.058.715c-1.233-.15-1.807-.46-1.786-.94 0-.226 1.045-.94 1.463-1.1a22.05 22.05 0 0 0 5.58 0c.47-.056.407-.705-.063-.649-1.4.16-5.894.057-6.322-.282a.302.302 0 0 1-.108-.105.267.267 0 0 1-.04-.139c0-.049.014-.096.04-.14a.301.301 0 0 1 .108-.104c1.108-1.034 5.058-2.078 6.113-2.228a.326.326 0 0 0 .211-.106.263.263 0 0 0 .066-.21.278.278 0 0 0-.118-.189.34.34 0 0 0-.232-.06h-.178v-3.205c1.881 1.006 2.613 3.31 3.198 5.17 2.633 8.263 1.129 7.718 3.814 9.344a7.27 7.27 0 0 1 1.192.846c-2.665 1.485-5.685.94-8.057-.808v-.029Z"
     />
     <Path
      fill="#000"
      d="M161.285 103.015c-.242 0-.478.064-.679.185a1.132 1.132 0 0 0-.45.494.995.995 0 0 0-.07.635c.047.213.164.409.335.563.171.154.389.259.626.301.237.043.483.021.706-.062.224-.084.415-.225.549-.406.134-.18.206-.393.206-.611 0-.291-.129-.571-.358-.777a1.296 1.296 0 0 0-.865-.322Zm-3.605 5.376c-.269 0-.531.072-.755.206a1.27 1.27 0 0 0-.5.549c-.103.223-.13.469-.077.706.052.237.181.455.371.626.19.17.432.287.696.334.264.047.537.023.785-.07a1.34 1.34 0 0 0 .61-.45c.149-.201.229-.437.229-.679 0-.324-.144-.634-.398-.864a1.442 1.442 0 0 0-.961-.358Zm-3.239 4.719c-.207 0-.409.055-.581.159a.966.966 0 0 0-.385.422.847.847 0 0 0-.059.543.91.91 0 0 0 .286.481c.146.131.332.221.535.257.202.036.412.018.603-.053s.355-.192.469-.347a.872.872 0 0 0 .177-.522.894.894 0 0 0-.307-.664 1.102 1.102 0 0 0-.738-.276Z"
     />
  </Svg>
)

const Wave = () => (
  <View style={styles.waveContainer}>
    <Svg 
      width={width}
      height={212} 
      fill="none"
    >
      <Path
        fill="#C9C2B5"
        fillRule="evenodd"
        d="m0 170.325 10.662-14.496c11.846-14.496 33.169-43.487 55.676-47.111 21.324-1.812 43.831 18.12 65.154 21.744 22.508 3.623 45.016-10.872 66.339-18.12 22.507-5.436 43.831-5.436 66.338 3.624 21.323 10.872 43.831 32.615 66.339 32.615 21.323 0 43.83-21.743 65.154-48.923 22.507-28.991 43.83-63.419 55.676-81.538L462 0v212H0v-41.675Z"
        clipRule="evenodd"
        opacity={0.5}
      />
    </Svg>
  </View>
);

export default function Login({navigation}) {
  const[username,setUsername]=useState("");
  const[password,setPassword]=useState("");
  const[showPassword,setShowPassword]=useState(false);
  const[errors,setErrors]=useState({});

  const handleLogin = async()=>{
    let currentErrors = {};

    if(!username.trim()){
      currentErrors.username = "Please enter a valid email or username";
    }
    if(!password){
      currentErrors.password = "Please enter your password";
    }
    if (Object.keys(currentErrors).length>0){
      setErrors(currentErrors);
      return;
    }
    setErrors({});

    try{
      const usersJson = await AsyncStorage.getItem('users');
      const users = usersJson ? JSON.parse(usersJson):[];
      const inputValue = username.trim();

      const user = users.find (u=>{
        const uName = u.username || "";
        const uEmail = u.email || "";

        const matchUsername = uName.toLowerCase() === inputValue.toLowerCase();
        const matchEmail = uEmail.toLowerCase() === inputValue.toLowerCase();
        const matchPassword = u.password === password;

        return (matchUsername || matchEmail) && matchPassword;
      });
      if(user){
        console.log("Login success", user.username);
        navigation.navigate('Home');
        setUsername("");
        setPassword("");
      }else{
        setErrors({form:"Invalid credentials. Please try again"});
      }
    }catch(e){
      console.log('Login error',e);
      Alert.alert('Something weng wrong','Please try again');
    }
  };

  return (
    <SafeAreaView style={styles.container}>
      <TouchableOpacity style={styles.backButton} onPress={()=>navigation.goBack()}>
        <View style={{marginTop:6}}>
          <BackArrowIcon/>
        </View>
        <Text style={styles.backText}>Back</Text>
      </TouchableOpacity> 
      <View style={styles.illustration}>
        <Illustration/>
      </View>  
      <View style={styles.mainContent}>
        <Text style={styles.title}>Login</Text>
        <TextInput
        placeholder='Email or Username'
        style={[styles.input, errors.username && styles.inputError]}
        onChangeText={(text)=>{
          setUsername(text);
          setErrors(prev=>({...prev,username:null}));
        }}
        autoCorrect={false}
        placeholderTextColor={errors.username? "#DA7676" : "#635C5C"}
        value={username}
        />
        {errors.username &&(
          <Text style={styles.errorText}>{errors.username}</Text>
        )}
        <View style={[styles.passwordContainer, errors.password && styles.inputError]}>
          <TextInput
          placeholder='Password'
          style={styles.passwordInput}
          onChangeText={(text) => {
            setPassword(text);
            setErrors(prev=>({...prev,password:null}));
          }} 
          autoCorrect={false}
          secureTextEntry={!showPassword}
          placeholderTextColor={errors.password ? "#DA7676" : "#635C5C"}          
          />
          <TouchableOpacity onPress={()=>setShowPassword(!showPassword)}>
            {showPassword ?<EyeClosedIcon/> : <EyeIcon/>}
          </TouchableOpacity>
        </View>
        {errors.password && (
          <Text style={styles.errorText}>{errors.password}</Text>
        )}

        <TouchableOpacity style={styles.loginButton} onPress={handleLogin}>
          <Text style={styles.loginText}>Login</Text>
        </TouchableOpacity>
      </View>   
      <Wave/>
    </SafeAreaView>
  )
}

const styles = StyleSheet.create({
  container:{
    flex:1,
    backgroundColor:"#E7E6E1",
    padding:20,
  },
  backButton:{
    flexDirection:"row",
    alignItems:"center",
    gap:5,
    alignSelf:"flex-start",
    paddingVertical:10,
  },
  backText:{
    fontSize:15,
    lineHeight:20,
  },
  illustration:{
    marginHorizontal:24,
  },
  mainContent:{
    gap:20,
    marginTop:5,
    marginHorizontal:13,
  },
  title:{
    fontSize:22,
    color:"#000",
    fontWeight:"bold",
  },
  input:{
    height: 60,
    borderWidth: 1,
    borderColor: "#887E7E",
    borderRadius: 5,
    paddingHorizontal: 16,
    fontSize: 16,
  },
  passwordContainer:{
    flexDirection:"row",
    alignItems:"center",
    height:60,
    borderWidth:1,
    borderColor:"#887E7E",
    borderRadius:5,
    paddingHorizontal:16
  },
  passwordInput:{
    flex:1,
    height:"100%",
    fontSize:16
  },
  loginButton:{
    paddingVertical:20,
    paddingHorizontal:50,
    marginTop:15,
    backgroundColor:"#EEE79A",
    alignItems:"center",
    alignSelf:"center",
    shadowColor: "#000",
    shadowOffset: {width: 0,height: 4, },
    shadowOpacity: 0.30,
    shadowRadius: 4.65,
    elevation: 8,
    borderRadius:10,
  },
  loginText:{
    fontSize:18,
    fontWeight:"bold",
  },
  waveContainer: {
    position: 'absolute',
    bottom: 0,
    zIndex: -1,
  },
  inputError:{
    borderColor: "#DA7676",
    backgroundColor: "#da767626", 
    color: "#DA7676",
    paddingHorizontal:15,
  },
  errorText:{
    color: "#DA7676",
    fontSize: 13,
    marginLeft: 5,
    fontWeight: '500',
  },

})